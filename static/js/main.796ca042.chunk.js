(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(50)},35:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n,r,i,s,c,o,l,u,m,d,f,p,b=a(0),v=a.n(b),h=a(8),y=a.n(h),O=(a(35),a(2)),E=a(10),g=function(e){var t=e.type,a=e.quantity,n=e.onClick,r=e.isSmall,i=e.showNumber,s=void 0===i||i,c=e.animate,o=void 0!==c&&c;return v.a.createElement("div",{className:"soldier ".concat(t," ").concat(r?"mini":""," ").concat(o?"animate":""),onClick:function(){return n()}},s?v.a.createElement("div",{className:"quantity"},a):null)},S=function(e){var t=e.notification,a=e.remove,n=t.title,r=t.message,i=t.type;return v.a.createElement("div",{className:"notification-item"},v.a.createElement("div",{className:"title-container"},v.a.createElement("div",{className:"title-wrapper"},v.a.createElement("img",{src:"success"===i?"/images/success-icon.svg":"/images/danger-icon.svg",alt:"success"}),v.a.createElement("span",null,n)),v.a.createElement("div",{className:"close",onClick:a},"\xd7")),v.a.createElement("div",{className:"message"},r))},w=Object(E.b)("notificationStore")(Object(E.c)(function(e){var t=e.notificationStore;return v.a.createElement("div",{className:"notification-frame"},t.notifications.map(function(e){return v.a.createElement(S,{notification:e,key:e.id,remove:function(){return t.remove(e.id)}})}))})),k=a(7),N=a(9),j=a(17),C=a(14),x=a(18),q=a(53),A=a(54),M=a(55),I=a(52),P=function(e){var t=e.progress;return v.a.createElement("div",{className:"loading-screen"},v.a.createElement("div",{className:"logo"},v.a.createElement("div",{className:"text"},"Loading...")),v.a.createElement("div",{className:"progress-bar"},v.a.createElement("div",{className:"filler",style:{width:300*t}})))},D=a(20),L=a(19),T=a(22),z=1,F=function(){return z+=1},H=function e(t,a,n,r){Object(k.a)(this,e),this.id=t,this.title=a,this.message=n,this.type=r},B={soldiers:[{id:1,type:"fire",price:.1},{id:2,type:"water",price:.1},{id:3,type:"wood",price:.1},{id:4,type:"metal",price:.1},{id:5,type:"earth",price:.1}],obstacles:[{id:6,type:"fire",price:.05},{id:7,type:"water",price:.05},{id:8,type:"wood",price:.05},{id:9,type:"metal",price:.05},{id:10,type:"earth",price:.05}]},J=Object(E.b)("userStore","notificationStore")(n=Object(E.c)(n=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(C.a)(t).call(this,e))).onAttackModalClosed=function(){var e=a.props.userStore;a.setState({showAttackModal:!1,selectedSoldiers:new Array(5).fill(null),freeSoldiers:e.soldiers})},a.onShopModalClosed=function(){a.setState({showShopModal:!1})},a.saveObstacles=function(){a.props.notificationStore.push(new H(F(),"Save obstacles","Saved successful!!!","success"))},a.attack=function(){a.props.notificationStore.push(new H(F(),"Attack","Attacked","success"))},a.state={loaded:!1,selectedSoldiers:new Array(5).fill(null),selectedObstacles:new Array(5).fill(null),freeObstacles:[],freeSoldiers:[],showAttackModal:!1,showShopModal:!1},a}return Object(x.a)(t,e),Object(N.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.userStore,n=a.soldiers,r=a.obstacles;return t.loaded?null:{loaded:!0,freeObstacles:Array.from(r),freeSoldiers:Array.from(n)}}}]),Object(N.a)(t,[{key:"removeItem",value:function(e,t){for(var a=e.length,n=Object(L.a)(e),r=t;r<a;r+=1)n[r]=n[r+1]||null;return n}},{key:"selectObstacle",value:function(e){var t=this.state,a=t.selectedObstacles,n=t.freeObstacles;if(!a[4]){var r=a.findIndex(function(e){return!e});a[r]=n[e];var i=this.removeItem(n,e);this.setState({selectedObstacles:a,freeObstacles:i})}}},{key:"removeObstacle",value:function(e){var t=this.state,a=t.selectedObstacles,n=t.freeObstacles,r=n.findIndex(function(e){return!e});n[r]=a[e];var i=this.removeItem(a,e);this.setState({selectedObstacles:i,freeObstacles:n})}},{key:"selectSoldier",value:function(e){var t=this.state,a=t.selectedSoldiers,n=t.freeSoldiers;if(!a[4]){var r=a.findIndex(function(e){return!e});a[r]=n[e];var i=Object(L.a)(n),s=i[e];i[e]=Object(D.a)({},s,{quantity:s.quantity-1}),i[e].quantity||(i=this.removeItem(i,e)),this.setState({selectedSoldiers:a,freeSoldiers:i})}}},{key:"removeSoldier",value:function(e){var t=this.state,a=t.selectedSoldiers,n=t.freeSoldiers,r=a[e],i=Object(L.a)(n),s=i.findIndex(function(e){return e&&e.type===r.type});if(-1!==s){var c=i[s];i[s]=Object(D.a)({},c,{quantity:c.quantity+1})}else{var o=i.findIndex(function(e){return!e});i[o]=Object(D.a)({},r,{quantity:1})}var l=this.removeItem(a,e);this.setState({selectedSoldiers:l,freeSoldiers:i})}},{key:"currentHealth",value:function(){return this.state.selectedObstacles.reduce(function(e,t){return t?e+20:e},0)}},{key:"renderObstacleList",value:function(e,t){return e.map(function(e,a){return e?v.a.createElement("div",{className:"obstacle ".concat(e),onClick:function(){return t(a)},key:F()}):v.a.createElement("div",{className:"empty-item",key:F()},a+1)})}},{key:"renderSoldierList",value:function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e?e.map(function(e,i){return e?v.a.createElement(g,{key:F(),onClick:function(){return t&&t(i)},type:e.type,isSmall:a,quantity:e.quantity,showNumber:n,animate:r}):v.a.createElement("div",{className:"empty-item ".concat(a?"mini":""),key:F()},a?"":i+1)}):null}},{key:"render",value:function(){var e=this,t=this.state,a=t.freeSoldiers,n=t.selectedSoldiers,r=t.freeObstacles,i=t.selectedObstacles,s=t.showAttackModal,c=t.showShopModal,o=this.props.userStore;return v.a.createElement("div",{className:"main py-4"},v.a.createElement("div",{className:"container"},v.a.createElement("section",{className:"align-items-center justify-content-between d-flex mb-4 tower-info"},v.a.createElement("div",{className:"d-flex align-items-center"},v.a.createElement("div",{className:"tower-avatar",style:{backgroundImage:"url(/images/sand-castle.png)"}}),v.a.createElement("div",{className:"d-flex flex-column ml-2"},v.a.createElement("div",{className:"health-bar"},v.a.createElement("div",{style:{backgroundColor:"#FF3636",width:"".concat(this.currentHealth(),"%")}})),v.a.createElement("div",{className:"username"},"Username 1"))),v.a.createElement("img",{className:"buy",src:"/images/shopping-cart.svg",onClick:function(){return e.setState({showShopModal:!0})},alt:"buy"})),v.a.createElement("div",{className:"title"},"My tower"),v.a.createElement("div",{className:"d-flex align-items-center"},v.a.createElement("div",{className:"item-list"},this.renderObstacleList(i,function(t){return e.removeObstacle(t)})),v.a.createElement("div",{className:"d-flex flex-fill justify-content-center align-items-center"},v.a.createElement("button",{className:"my-button ml-3",onClick:this.saveObstacles},"Save"))),v.a.createElement("div",{className:"tower"},v.a.createElement("div",{className:"title"},"Obstacle queue"),v.a.createElement("div",{className:"item-list"},this.renderObstacleList(r,function(t){return e.selectObstacle(t)}))),v.a.createElement("div",{className:"title"},"My soldies"),v.a.createElement("div",{className:"d-flex align-items-center"},v.a.createElement("div",{className:"item-list"},this.renderSoldierList(o.soldiers)),v.a.createElement("div",{className:"d-flex flex-fill justify-content-center"},v.a.createElement("button",{className:"my-button ml-3",onClick:function(){return e.setState({showAttackModal:!0})}},"Attack")))),v.a.createElement(T.a,{open:s,onClose:this.onAttackModalClosed,center:!0},v.a.createElement("h3",null,"Setup for your army"),v.a.createElement("div",{className:"item-list"},this.renderSoldierList(a,function(t){return e.selectSoldier(t)},!0)),v.a.createElement("div",{className:"item-list mt-3"},this.renderSoldierList(n,function(t){return e.removeSoldier(t)},!1,!1,!0)),v.a.createElement("div",null,v.a.createElement("input",{type:"text",className:"my-input",placeholder:"Target address"})),v.a.createElement("div",{className:"d-flex justify-content-center mt-2"},v.a.createElement("button",{className:"my-button",onClick:this.attack},"Start attack"))),v.a.createElement(T.a,{open:c,onClose:this.onShopModalClosed,classNames:{modal:"shop-modal"}},v.a.createElement("h3",null,"Shop"),v.a.createElement("div",{className:"item-list"},B.soldiers.map(function(e){return v.a.createElement("div",{key:e.id,className:"shop-item"},v.a.createElement(g,{type:e.type,showNumber:!1,animate:!1}),v.a.createElement("div",{className:"price"},e.price," ETH"))}),B.obstacles.map(function(e){return v.a.createElement("div",{key:e.id,className:"shop-item"},v.a.createElement("div",{className:"obstacle ".concat(e.type),onClick:function(){},key:F()}),v.a.createElement("div",{className:"price"},e.price," ETH"))}))))}}]),t}(v.a.Component))||n)||n,U=a(12),W=Object(U.a)(),$=!0,G=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(C.a)(t).call(this,e))).finishProgress=function(){var e=a.state.progress;e>=.9||(a.setState({progress:e+.1}),setTimeout(a.finishProgress,100))},a.checkStatus=function(){if($)return a.finishProgress();setTimeout(a.checkStatus,100)},a.initProgress=function(){var e=a.state.progress;e>=.5?a.checkStatus():(a.setState({progress:e+.1}),setTimeout(a.initProgress,100))},a.state={progress:0},a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.initProgress()},1e3)}},{key:"render",value:function(){var e=this.state.progress;return e>=.9?v.a.createElement(q.a,{history:W},v.a.createElement(A.a,null,v.a.createElement(M.a,{path:"/main",component:J}),v.a.createElement(M.a,{path:"/",exact:!0,render:function(){return v.a.createElement(I.a,{to:"/main"})}}))):v.a.createElement(P,{progress:e})}}]),t}(v.a.Component),K=a(11),Q=a(6),R=(a(26),{userStore:new(r=O.d.bound,i=function(){function e(){Object(k.a)(this,e),Object(K.a)(this,"id",s,this),Object(K.a)(this,"username",c,this),Object(K.a)(this,"address",o,this),Object(K.a)(this,"obstacles",l,this),Object(K.a)(this,"soldiers",u,this)}return Object(N.a)(e,[{key:"setData",value:function(e,t,a,n){e&&(this.id=e),t&&(this.username=t),a&&(this.address=a),n&&(this.obstacles=n)}},{key:"obstacleCount",get:function(){return this.obstacles.length}}]),e}(),s=Object(Q.a)(i.prototype,"id",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=Object(Q.a)(i.prototype,"username",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Username 1"}}),o=Object(Q.a)(i.prototype,"address",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(Q.a)(i.prototype,"obstacles",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["fire","metal","wood","water","earth"]}}),u=Object(Q.a)(i.prototype,"soldiers",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{id:1,type:"earth",quantity:4},{id:2,type:"wood",quantity:4},{id:3,type:"water",quantity:2},{id:4,type:"fire",quantity:4},{id:5,type:"metal",quantity:1}]}}),Object(Q.a)(i.prototype,"obstacleCount",[O.e],Object.getOwnPropertyDescriptor(i.prototype,"obstacleCount"),i.prototype),Object(Q.a)(i.prototype,"setData",[r],Object.getOwnPropertyDescriptor(i.prototype,"setData"),i.prototype),i),notificationStore:new(m=O.d.bound,d=O.d.bound,f=function(){function e(){Object(k.a)(this,e),Object(K.a)(this,"notifications",p,this)}return Object(N.a)(e,[{key:"push",value:function(e){var t=this;this.notifications.push(e),setTimeout(function(){return t.remove(e.id)},4e3)}},{key:"remove",value:function(e){this.notifications=this.notifications.filter(function(t){return t.id!==e})}}]),e}(),p=Object(Q.a)(f.prototype,"notifications",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(Q.a)(f.prototype,"push",[m],Object.getOwnPropertyDescriptor(f.prototype,"push"),f.prototype),Object(Q.a)(f.prototype,"remove",[d],Object.getOwnPropertyDescriptor(f.prototype,"remove"),f.prototype),f)});Object(O.f)({enforceActions:"observed"});var V=function(){return v.a.createElement(E.a,R,v.a.createElement(v.a.Fragment,null,v.a.createElement(G,null),v.a.createElement(w,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=document.getElementById("root");y.a.render(v.a.createElement(V,null),X),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.796ca042.chunk.js.map