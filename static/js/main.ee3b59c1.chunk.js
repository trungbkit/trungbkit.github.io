(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(50)},35:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n,r,i,s,c,o,l,u,m,d,f,b,v=a(0),p=a.n(v),h=a(8),y=a.n(h),O=(a(35),a(2)),g=a(10),E=function(e){var t=e.type,a=e.quantity,n=e.onClick,r=e.isSmall,i=e.showNumber,s=void 0===i||i,c=e.animate,o=void 0!==c&&c;return p.a.createElement("div",{className:"soldier ".concat(t," ").concat(r?"mini":""," ").concat(o?"animate":""),onClick:function(){return n()}},s?p.a.createElement("div",{className:"quantity"},a):null)},S=function(e){var t=e.notification,a=e.remove,n=t.title,r=t.message,i=t.type;return p.a.createElement("div",{className:"notification-item"},p.a.createElement("div",{className:"title-container"},p.a.createElement("div",{className:"title-wrapper"},p.a.createElement("img",{src:"success"===i?"/images/success-icon.svg":"/images/danger-icon.svg",alt:"success"}),p.a.createElement("span",null,n)),p.a.createElement("div",{className:"close",onClick:a},"\xd7")),p.a.createElement("div",{className:"message"},r))},j=Object(g.b)("notificationStore")(Object(g.c)(function(e){var t=e.notificationStore;return p.a.createElement("div",{className:"notification-frame"},t.notifications.map(function(e){return p.a.createElement(S,{notification:e,key:e.id,remove:function(){return t.remove(e.id)}})}))})),w=a(7),N=a(9),k=a(17),x=a(14),C=a(18),q=a(53),I=a(54),P=a(55),A=a(52),D=function(e){var t=e.progress;return p.a.createElement("div",{className:"loading-screen"},p.a.createElement("div",{className:"logo"},p.a.createElement("div",{className:"text"},"Loading...")),p.a.createElement("div",{className:"progress-bar"},p.a.createElement("div",{className:"filler",style:{width:300*t}})))},M=a(20),L=a(19),z=a(26),T=1,F=function(){return T+=1},B=function e(t,a,n,r){Object(w.a)(this,e),this.id=t,this.title=a,this.message=n,this.type=r},H=Object(g.b)("userStore","notificationStore")(n=Object(g.c)(n=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(x.a)(t).call(this,e))).onModalClosed=function(){var e=a.props.userStore;a.setState({showModal:!1,selectedSoldiers:new Array(5).fill(null),freeSoldiers:e.soldiers})},a.saveObstacles=function(){a.props.notificationStore.push(new B(F(),"Save obstacles","Saved successful!!!","success"))},a.attack=function(){a.props.notificationStore.push(new B(F(),"Attack","Attacked","success"))},a.state={loaded:!1,selectedSoldiers:new Array(5).fill(null),selectedObstacles:new Array(5).fill(null),freeObstacles:[],freeSoldiers:[],showModal:!1},a}return Object(C.a)(t,e),Object(N.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.userStore,n=a.soldiers,r=a.obstacles;return t.loaded?null:{loaded:!0,freeObstacles:Array.from(r),freeSoldiers:Array.from(n)}}}]),Object(N.a)(t,[{key:"removeItem",value:function(e,t){for(var a=e.length,n=Object(L.a)(e),r=t;r<a;r+=1)n[r]=n[r+1]||null;return n}},{key:"selectObstacle",value:function(e){var t=this.state,a=t.selectedObstacles,n=t.freeObstacles;if(!a[4]){var r=a.findIndex(function(e){return!e});a[r]=n[e];var i=this.removeItem(n,e);this.setState({selectedObstacles:a,freeObstacles:i})}}},{key:"removeObstacle",value:function(e){var t=this.state,a=t.selectedObstacles,n=t.freeObstacles,r=n.findIndex(function(e){return!e});n[r]=a[e];var i=this.removeItem(a,e);this.setState({selectedObstacles:i,freeObstacles:n})}},{key:"selectSoldier",value:function(e){var t=this.state,a=t.selectedSoldiers,n=t.freeSoldiers;if(!a[4]){var r=a.findIndex(function(e){return!e});a[r]=n[e];var i=Object(L.a)(n),s=i[e];i[e]=Object(M.a)({},s,{quantity:s.quantity-1}),i[e].quantity||(i=this.removeItem(i,e)),this.setState({selectedSoldiers:a,freeSoldiers:i})}}},{key:"removeSoldier",value:function(e){var t=this.state,a=t.selectedSoldiers,n=t.freeSoldiers,r=a[e],i=Object(L.a)(n),s=i.findIndex(function(e){return e&&e.type===r.type});if(-1!==s){var c=i[s];i[s]=Object(M.a)({},c,{quantity:c.quantity+1})}else{var o=i.findIndex(function(e){return!e});i[o]=Object(M.a)({},r,{quantity:1})}var l=this.removeItem(a,e);this.setState({selectedSoldiers:l,freeSoldiers:i})}},{key:"currentHealth",value:function(){return this.state.selectedObstacles.reduce(function(e,t){return t?e+20:e},0)}},{key:"renderObstacleList",value:function(e,t){return e.map(function(e,a){return e?p.a.createElement("div",{className:"obstacle ".concat(e),onClick:function(){return t(a)},key:F()}):p.a.createElement("div",{className:"empty-item",key:F()},a+1)})}},{key:"renderSoldierList",value:function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e?e.map(function(e,i){return e?p.a.createElement(E,{key:F(),onClick:function(){return t&&t(i)},type:e.type,isSmall:a,quantity:e.quantity,showNumber:n,animate:r}):p.a.createElement("div",{className:"empty-item ".concat(a?"mini":""),key:F()},a?"":i+1)}):null}},{key:"render",value:function(){var e=this,t=this.state,a=t.freeSoldiers,n=t.selectedSoldiers,r=t.freeObstacles,i=t.selectedObstacles,s=t.showModal,c=this.props.userStore;return p.a.createElement("div",{className:"main py-4"},p.a.createElement("div",{className:"container"},p.a.createElement("section",{className:"align-items-center justify-content-between d-flex mb-4 tower-info"},p.a.createElement("div",{className:"d-flex align-items-center"},p.a.createElement("div",{className:"tower-avatar",style:{backgroundImage:"url(/images/sand-castle.png)"}}),p.a.createElement("div",{className:"d-flex flex-column ml-2"},p.a.createElement("div",{className:"health-bar"},p.a.createElement("div",{style:{backgroundColor:"#FF3636",width:"".concat(this.currentHealth(),"%")}})),p.a.createElement("div",{className:"username"},"Username 1"))),p.a.createElement("img",{className:"buy",src:"/images/shopping-cart.svg",alt:"buy"})),p.a.createElement("div",{className:"title"},"My tower"),p.a.createElement("div",{className:"d-flex align-items-center"},p.a.createElement("div",{className:"item-list"},this.renderObstacleList(i,function(t){return e.removeObstacle(t)})),p.a.createElement("div",{className:"d-flex flex-fill justify-content-center align-items-center"},p.a.createElement("button",{className:"my-button ml-3",onClick:this.saveObstacles},"Save"))),p.a.createElement("div",{className:"tower"},p.a.createElement("div",{className:"title"},"Obstacle queue"),p.a.createElement("div",{className:"item-list"},this.renderObstacleList(r,function(t){return e.selectObstacle(t)}))),p.a.createElement("div",{className:"title"},"My soldies"),p.a.createElement("div",{className:"d-flex align-items-center"},p.a.createElement("div",{className:"item-list"},this.renderSoldierList(c.soldiers)),p.a.createElement("div",{className:"d-flex flex-fill justify-content-center"},p.a.createElement("button",{className:"my-button ml-3",onClick:function(){return e.setState({showModal:!0})}},"Attack")))),p.a.createElement(z.a,{open:s,onClose:this.onModalClosed,center:!0},p.a.createElement("h3",null,"Setup for your army"),p.a.createElement("div",{className:"item-list"},this.renderSoldierList(a,function(t){return e.selectSoldier(t)},!0)),p.a.createElement("div",{className:"item-list mt-3"},this.renderSoldierList(n,function(t){return e.removeSoldier(t)},!1,!1,!0)),p.a.createElement("div",null,p.a.createElement("input",{type:"text",className:"my-input",placeholder:"Target address"})),p.a.createElement("div",{className:"d-flex justify-content-center mt-2"},p.a.createElement("button",{className:"my-button",onClick:this.attack},"Start attack"))))}}]),t}(p.a.Component))||n)||n,J=a(12),U=Object(J.a)(),W=!0,$=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(k.a)(this,Object(x.a)(t).call(this,e))).finishProgress=function(){var e=a.state.progress;e>=.9||(a.setState({progress:e+.1}),setTimeout(a.finishProgress,100))},a.checkStatus=function(){if(W)return a.finishProgress();setTimeout(a.checkStatus,100)},a.initProgress=function(){var e=a.state.progress;e>=.5?a.checkStatus():(a.setState({progress:e+.1}),setTimeout(a.initProgress,100))},a.state={progress:0},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.initProgress()},1e3)}},{key:"render",value:function(){var e=this.state.progress;return e>=.9?p.a.createElement(q.a,{history:U},p.a.createElement(I.a,null,p.a.createElement(P.a,{path:"/main",component:H}),p.a.createElement(P.a,{path:"/",exact:!0,render:function(){return p.a.createElement(A.a,{to:"/main"})}}))):p.a.createElement(D,{progress:e})}}]),t}(p.a.Component),G=a(11),K=a(6),Q=(a(25),{userStore:new(r=O.d.bound,i=function(){function e(){Object(w.a)(this,e),Object(G.a)(this,"id",s,this),Object(G.a)(this,"username",c,this),Object(G.a)(this,"address",o,this),Object(G.a)(this,"obstacles",l,this),Object(G.a)(this,"soldiers",u,this)}return Object(N.a)(e,[{key:"setData",value:function(e,t,a,n){e&&(this.id=e),t&&(this.username=t),a&&(this.address=a),n&&(this.obstacles=n)}},{key:"obstacleCount",get:function(){return this.obstacles.length}}]),e}(),s=Object(K.a)(i.prototype,"id",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=Object(K.a)(i.prototype,"username",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Username 1"}}),o=Object(K.a)(i.prototype,"address",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(K.a)(i.prototype,"obstacles",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["fire","metal","wood","water","earth"]}}),u=Object(K.a)(i.prototype,"soldiers",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{id:1,type:"earth",quantity:4},{id:2,type:"wood",quantity:4},{id:3,type:"water",quantity:2},{id:4,type:"fire",quantity:4},{id:5,type:"metal",quantity:1}]}}),Object(K.a)(i.prototype,"obstacleCount",[O.e],Object.getOwnPropertyDescriptor(i.prototype,"obstacleCount"),i.prototype),Object(K.a)(i.prototype,"setData",[r],Object.getOwnPropertyDescriptor(i.prototype,"setData"),i.prototype),i),notificationStore:new(m=O.d.bound,d=O.d.bound,f=function(){function e(){Object(w.a)(this,e),Object(G.a)(this,"notifications",b,this)}return Object(N.a)(e,[{key:"push",value:function(e){var t=this;this.notifications.push(e),setTimeout(function(){return t.remove(e.id)},4e3)}},{key:"remove",value:function(e){this.notifications=this.notifications.filter(function(t){return t.id!==e})}}]),e}(),b=Object(K.a)(f.prototype,"notifications",[O.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(K.a)(f.prototype,"push",[m],Object.getOwnPropertyDescriptor(f.prototype,"push"),f.prototype),Object(K.a)(f.prototype,"remove",[d],Object.getOwnPropertyDescriptor(f.prototype,"remove"),f.prototype),f)});Object(O.f)({enforceActions:"observed"});var R=function(){return p.a.createElement(g.a,Q,p.a.createElement(p.a.Fragment,null,p.a.createElement($,null),p.a.createElement(j,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=document.getElementById("root");y.a.render(p.a.createElement(R,null),V),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.ee3b59c1.chunk.js.map